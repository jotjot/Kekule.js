define("qtype_kekule_mol_naming/extraWidgets",["kekule","local_kekulejs/kekuleMoodle"],(function(){function init(){"undefined"!=typeof Kekule&&void 0!==Kekule.Widget&&("undefined"==typeof KekuleMoodle&&(KekuleMoodle={}),KekuleMoodle.Widget||(KekuleMoodle.Widget={}),KekuleMoodle.Widget.CharSelectorPanel=Class.create(Kekule.Widget.Panel,{CLASS_NAME:"KekuleMoodle.Widget.CharSelectorPanel",initialize:function(parentOrElementOrDocument){this.setPropStoreFieldValue("groupDelimiter","\n"),this.setPropStoreFieldValue("charDelimiter"," "),this.tryApplySuper("initialize",[parentOrElementOrDocument])},initProperties:function(){this.defineProp("chars",{dataType:DataType.STRING,setter:function(value){this.setPropStoreFieldValue("chars",value||[]),this.charsChanged()}}),this.defineProp("groupDelimiter",{dataType:DataType.STRING,setter:function(value){this.setPropStoreFieldValue("groupDelimiter",value||[]),this.charsChanged()}}),this.defineProp("charDelimiter",{dataType:DataType.STRING,setter:function(value){this.setPropStoreFieldValue("charDelimiter",value||[]),this.charsChanged()}})},doFinalize:function(){this.tryApplySuper("doFinalize")},doGetWidgetClassName:function(){return this.tryApplySuper("doGetWidgetClassName")+" KM-CharSelectorPanel"},charsChanged:function(){this._createCharContent(this.getDocument(),this.getChildrenHolderElement())},_getCharGroups:function(charContent){for(var groupDelimiter=this.getGroupDelimiter(),charDelimiter=this.getCharDelimiter(),lines=(charContent||"").split(groupDelimiter),result=[],i=0,l=lines.length;i<l;++i){var chars=lines[i].split(charDelimiter);result.push(chars)}return result},doCreateSubElements:function(doc,rootElem){this._createCharContent(doc,rootElem)},_createCharContent:function(doc,parentElem){this._charContentELem&&this._charContentELem.parentNode.removeChild(this._charContentELem);for(var charGroups=this._getCharGroups(this.getChars()),result=doc.createElement("div"),i=0,ii=charGroups.length;i<ii;++i)if(charGroups[i].length){for(var groupElem=doc.createElement("p"),j=0,jj=charGroups[i].length;j<jj;++j){var s=(charGroups[i][j]||"").trim();if(s){var charElem=doc.createElement("span");charElem.innerHTML=s,groupElem.appendChild(charElem)}}result.appendChild(groupElem)}return parentElem.appendChild(result),this._charContentELem=result,Kekule.X.Event.addListener(this._charContentELem,"click",this._reactCellClick.bind(this)),result},_reactCellClick:function(e){var elem=e.getTarget();"span"===elem.tagName.toLowerCase()&&this.invokeEvent("valueChange",{value:elem.innerText})}}),KekuleMoodle.Widget.CharSelectorGropButton=Class.create(Kekule.Widget.DropDownButton,{CLASS_NAME:"KekuleMoodle.Widget.CharSelectorGropButton",initialize:function(parentOrElementOrDocument){this.setPropStoreFieldValue("groupDelimiter","\n"),this.setPropStoreFieldValue("charDelimiter"," "),this.tryApplySuper("initialize",[parentOrElementOrDocument]),this.setButtonKind(Kekule.Widget.Button.Kinds.DROPDOWN)},initProperties:function(){this.defineProp("chars",{dataType:DataType.STRING}),this.defineProp("groupDelimiter",{dataType:DataType.STRING}),this.defineProp("charDelimiter",{dataType:DataType.STRING}),this.defineProp("selector",{dataType:"KekuleMoodle.Widget.CharSelectorPanel",setter:null,serializable:!1,scope:Class.PropertyScope.PUBLIC,getter:function(){var result=this.getPropStoreFieldValue("selector");return result||((result=new KekuleMoodle.Widget.CharSelectorPanel(this)).setPropStoreFieldValue("groupDelimiter",this.getGroupDelimiter()),result.setPropStoreFieldValue("charDelimiter",this.getCharDelimiter()),result.setChars(this.getChars()),result.setDisplayed(!1),result.getElement().style.position="absolute",result.addEventListener("valueChange",this.reactPanelValueChange,this),this.setPropStoreFieldValue("selector",result)),result}})},doFinalize:function(){var selector=this.getPropStoreFieldValue("selector");selector&&selector.finalize(),this.tryApplySuper("doFinalize")},doGetWidgetClassName:function(){return this.tryApplySuper("doGetWidgetClassName")+" KM-CharSelectorGroupButton"},doGetDropDownWidget:function(){return this.getSelector()},reactPanelValueChange:function(e){var value=e.value;this.invokeEvent("valueChange",{value:value}),e.stopPropagation()}}))}return{init:function(){Kekule._ready(init)}}}));

//# sourceMappingURL=extraWidgets.min.js.map