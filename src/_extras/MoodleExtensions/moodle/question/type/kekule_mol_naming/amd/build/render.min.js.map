{"version":3,"file":"render.min.js","sources":["../src/render.js"],"sourcesContent":["define(/*'qtype_kekule_mol_naming/render',*/ ['kekule', 'qtype_kekule_mol_naming/extraWidgets', 'core/str'], function($K, $EW, Str){\r\n\tvar initParams;\r\n\r\n\tfunction init() {\r\n\r\n\t\tfunction findInputControls() {\r\n\t\t\tvar elems = document.querySelectorAll('.kekule_mol_naming input[type=text][data-enable-char-selector]');\r\n\t\t\treturn elems;\r\n\t\t}\r\n\r\n\t\tfunction createAssocWidgets(inputControls) {\r\n\t\t\tfor (var i = 0, l = inputControls.length; i < l; ++i) {\r\n\t\t\t\tvar inputControl = inputControls[i];\r\n\t\t\t\tif (inputControl.__bindCharSelector__)  // already created selector\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\tif (inputControl.hasAttribute('readonly'))   // readonly input control in review page, do not create button\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\tvar parentNode = inputControl.parentNode;\r\n\t\t\t\tvar doc = inputControl.ownerDocument;\r\n\t\t\t\tvar selectorElem = doc.createElement('span');\r\n\t\t\t\tselectorElem.className = 'KM-MolNamingCharSelectorWrapper';\r\n\r\n\t\t\t\tvar btn = new KekuleMoodle.Widget.CharSelectorGropButton(doc);\r\n\t\t\t\tbtn.setShowText(false);\r\n\t\t\t\tbtn.setChars(initParams.charselectorcontent);\r\n\t\t\t\tvar stringkeys = [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tkey: 'captionSelectorMolNamingChar',\r\n\t\t\t\t\t\tcomponent: 'qtype_kekule_mol_naming'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tkey: 'hintSelectorMolNamingChar',\r\n\t\t\t\t\t\tcomponent: 'qtype_kekule_mol_naming',\r\n\t\t\t\t\t}\r\n\t\t\t\t];\r\n\t\t\t\tStr.get_strings(stringkeys).then(function(strings) {\r\n\t\t\t\t\tbtn.setText(strings[0]).setHint(strings[1]);\r\n\t\t\t\t});\r\n\r\n\t\t\t\t//btn.setText(Str.get_string('captionSelectorMolNamingChar', 'qtype_kekule_mol_naming'))  /*Kekule.$L('KekuleMoodleTexts.CAPTION_SELECTOR_MOL_NAMING_CHAR')*/)\r\n\t\t\t\t//\t.setHint(Str.get_string('hintSelectorMolNamingChar', 'qtype_kekule_mol_naming'))  /*Kekule.$L('KekuleMoodleTexts.HINT_SELECTOR_MOL_NAMING_CHAR')*/)\r\n\r\n\t\t\t\tbtn.__targetInputControl__ = inputControl;\r\n\t\t\t\tbtn.addEventListener('valueChange', function(e) {\r\n\t\t\t\t\tvar value = e.value;\r\n\t\t\t\t\tvar widget = e.widget;\r\n\t\t\t\t\tif (value)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tvar inputControl = widget.__targetInputControl__;\r\n\t\t\t\t\t\tinputControl.value += value;\r\n\t\t\t\t\t\tinputControl.focus();\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\tinputControl.__bindCharSelector__ = true;\r\n\t\t\t\tinputControl.className = (inputControl.className || '') + ' KM-TextboxWithCharSelector'\r\n\t\t\t\tbtn.appendToElem(selectorElem);\r\n\t\t\t\tparentNode.insertBefore(selectorElem, inputControl);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction init() {\r\n\t\t\tvar inputControls = findInputControls();\r\n\t\t\tcreateAssocWidgets(inputControls);\r\n\t\t}\r\n\r\n\t\t//console.log('prepare question init');\r\n\t\tKekule.X.domReady(init);\r\n\r\n\t}\r\n\r\n\treturn {\r\n\t\t'init': function(params){\r\n\t\t\tinitParams = params;\r\n\t\t\t//console.log('render.js initial', params);\r\n\t\t\tKekule._ready(init);\r\n\t\t}\r\n\t};\r\n\r\n});"],"names":["define","$K","$EW","Str","initParams","init","Kekule","X","domReady","inputControls","i","l","length","inputControl","__bindCharSelector__","hasAttribute","parentNode","doc","ownerDocument","selectorElem","createElement","className","btn","KekuleMoodle","Widget","CharSelectorGropButton","setShowText","setChars","charselectorcontent","get_strings","key","component","then","strings","setText","setHint","__targetInputControl__","addEventListener","e","value","widget","focus","appendToElem","insertBefore","createAssocWidgets","document","querySelectorAll","params","_ready"],"mappings":"AAAAA,wCAA6C,CAAC,SAAU,uCAAwC,aAAa,SAASC,GAAIC,IAAKC,SAC1HC,oBAEKC,OA+DRC,OAAOC,EAAEC,+BAxDmBC,mBACtB,IAAIC,EAAI,EAAGC,EAAIF,cAAcG,OAAQF,EAAIC,IAAKD,EAAG,KACjDG,aAAeJ,cAAcC,OAC7BG,aAAaC,uBAEbD,aAAaE,aAAa,iBAE1BC,WAAaH,aAAaG,WAC1BC,IAAMJ,aAAaK,cACnBC,aAAeF,IAAIG,cAAc,QACrCD,aAAaE,UAAY,sCAErBC,IAAM,IAAIC,aAAaC,OAAOC,uBAAuBR,KACzDK,IAAII,aAAY,GAChBJ,IAAIK,SAASvB,WAAWwB,qBAWxBzB,IAAI0B,YAVa,CAChB,CACCC,IAAK,+BACLC,UAAW,2BAEZ,CACCD,IAAK,4BACLC,UAAW,6BAGeC,MAAK,SAASC,SACzCX,IAAIY,QAAQD,QAAQ,IAAIE,QAAQF,QAAQ,OAMzCX,IAAIc,uBAAyBvB,aAC7BS,IAAIe,iBAAiB,eAAe,SAASC,OACxCC,MAAQD,EAAEC,MACVC,OAASF,EAAEE,UACXD,MACJ,KACK1B,aAAe2B,OAAOJ,uBAC1BvB,aAAa0B,OAASA,MACtB1B,aAAa4B,YAGf5B,aAAaC,sBAAuB,EACpCD,aAAaQ,WAAaR,aAAaQ,WAAa,IAAM,8BAC1DC,IAAIoB,aAAavB,cACjBH,WAAW2B,aAAaxB,aAAcN,gBAMvC+B,CAxDYC,SAASC,iBAAiB,4EAgEjC,MACE,SAASC,QAChB3C,WAAa2C,OAEbzC,OAAO0C,OAAO3C"}